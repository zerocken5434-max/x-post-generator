<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>XæŠ•ç¨¿æ–‡ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ï½œé“ã®é§… è©ã•ã‚“ã•ã‚“ä¸‰è¦‹</title>
  <style>
    :root {
      --primary: #2d7d46;
      --primary-light: #e8f5ec;
      --primary-dark: #1a5c31;
      --accent: #e8a020;
      --accent-light: #fdf3e0;
      --text: #222;
      --text-muted: #666;
      --border: #d0d0d0;
      --bg: #f7f9f7;
      --white: #fff;
      --radius: 12px;
      --shadow: 0 2px 12px rgba(0,0,0,0.08);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Meiryo', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.6;
    }

    header {
      background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
      color: var(--white);
      padding: 20px 16px 18px;
      text-align: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }

    header .station-name {
      font-size: 12px;
      opacity: 0.85;
      letter-spacing: 1px;
      margin-bottom: 4px;
    }

    header h1 {
      font-size: 20px;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    header .subtitle {
      font-size: 12px;
      opacity: 0.75;
      margin-top: 4px;
    }

    .container {
      max-width: 680px;
      margin: 0 auto;
      padding: 20px 16px 40px;
    }

    .card {
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 20px;
      margin-bottom: 16px;
    }

    .card h2 {
      font-size: 15px;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card h2::before {
      content: '';
      display: inline-block;
      width: 4px;
      height: 18px;
      background: var(--primary);
      border-radius: 2px;
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-group:last-child {
      margin-bottom: 0;
    }

    label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    input[type="text"],
    textarea,
    select {
      width: 100%;
      padding: 10px 14px;
      border: 1.5px solid var(--border);
      border-radius: 8px;
      font-size: 15px;
      font-family: inherit;
      color: var(--text);
      background: var(--white);
      transition: border-color 0.2s, box-shadow 0.2s;
      appearance: none;
      -webkit-appearance: none;
    }

    input[type="text"]:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(45, 125, 70, 0.15);
    }

    textarea {
      resize: vertical;
      min-height: 90px;
    }

    .select-wrapper {
      position: relative;
    }

    .select-wrapper::after {
      content: 'â–¾';
      position: absolute;
      right: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-muted);
      pointer-events: none;
      font-size: 14px;
    }

    .tone-group {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .tone-option {
      flex: 1;
      min-width: 100px;
    }

    .tone-option input[type="radio"] {
      display: none;
    }

    .tone-option label {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 12px 8px;
      border: 1.5px solid var(--border);
      border-radius: 10px;
      cursor: pointer;
      text-align: center;
      transition: all 0.2s;
      font-weight: 600;
      font-size: 13px;
      color: var(--text);
      background: var(--white);
    }

    .tone-option label .emoji {
      font-size: 22px;
    }

    .tone-option input[type="radio"]:checked + label {
      border-color: var(--primary);
      background: var(--primary-light);
      color: var(--primary-dark);
    }

    .generate-btn {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: var(--white);
      border: none;
      border-radius: var(--radius);
      font-size: 16px;
      font-weight: 700;
      font-family: inherit;
      cursor: pointer;
      letter-spacing: 0.5px;
      box-shadow: 0 4px 14px rgba(45, 125, 70, 0.35);
      transition: transform 0.15s, box-shadow 0.15s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      margin-bottom: 20px;
    }

    .generate-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 18px rgba(45, 125, 70, 0.4);
    }

    .generate-btn:active {
      transform: translateY(0);
    }

    .generate-btn .btn-icon {
      font-size: 20px;
    }

    /* Results */
    #results { display: none; }

    .results-header {
      font-size: 14px;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: 12px;
      text-align: center;
    }

    .post-card {
      background: var(--white);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
      margin-bottom: 12px;
      border-left: 4px solid var(--primary);
      position: relative;
    }

    .post-card:nth-child(2) { border-left-color: var(--accent); }
    .post-card:nth-child(3) { border-left-color: #7b68ee; }

    .post-card .pattern-label {
      font-size: 11px;
      font-weight: 700;
      color: var(--text-muted);
      letter-spacing: 1px;
      text-transform: uppercase;
      margin-bottom: 10px;
    }

    .post-card .post-text {
      font-size: 15px;
      line-height: 1.75;
      color: var(--text);
      white-space: pre-wrap;
      word-break: break-all;
    }

    .post-card .post-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 12px;
      padding-top: 10px;
      border-top: 1px solid #f0f0f0;
    }

    .char-count {
      font-size: 12px;
      color: var(--text-muted);
    }

    .char-count.over { color: #e53935; font-weight: 700; }
    .char-count.warn { color: var(--accent); }

    .auto-notice {
      background: var(--primary-light);
      border: 1px solid #a8d5b5;
      border-radius: 8px;
      padding: 8px 14px;
      font-size: 12px;
      color: var(--primary-dark);
      margin-bottom: 12px;
      text-align: center;
    }

    .copy-btn {
      padding: 6px 14px;
      border: 1.5px solid var(--primary);
      border-radius: 20px;
      background: transparent;
      color: var(--primary);
      font-size: 12px;
      font-weight: 700;
      font-family: inherit;
      cursor: pointer;
      transition: all 0.2s;
    }

    .copy-btn:hover {
      background: var(--primary);
      color: var(--white);
    }

    .copy-btn.copied {
      background: var(--primary);
      color: var(--white);
    }

    /* Hashtags */
    .hashtag-section {
      background: var(--accent-light);
      border-radius: var(--radius);
      padding: 16px;
      margin-top: 4px;
    }

    .hashtag-section h3 {
      font-size: 13px;
      font-weight: 700;
      color: #7a5500;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .hashtag-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .hashtag-tag {
      background: var(--white);
      border: 1.5px solid #f0c060;
      border-radius: 20px;
      padding: 5px 12px;
      font-size: 13px;
      color: #7a5500;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      user-select: all;
    }

    .hashtag-tag:hover {
      background: var(--accent);
      color: var(--white);
      border-color: var(--accent);
    }

    .regenerate-btn {
      width: 100%;
      margin-top: 16px;
      padding: 12px;
      background: transparent;
      color: var(--primary);
      border: 2px solid var(--primary);
      border-radius: var(--radius);
      font-size: 15px;
      font-weight: 700;
      font-family: inherit;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .regenerate-btn:hover {
      background: var(--primary-light);
    }

    footer {
      text-align: center;
      font-size: 11px;
      color: var(--text-muted);
      padding: 20px 16px;
    }

    @media (max-width: 400px) {
      header h1 { font-size: 17px; }
      .tone-group { gap: 6px; }
      .tone-option label { padding: 10px 6px; font-size: 12px; }
      .tone-option label .emoji { font-size: 18px; }
    }
  </style>
</head>
<body>

<header>
  <div class="station-name">é“ã®é§… è©ã•ã‚“ã•ã‚“ä¸‰è¦‹</div>
  <h1>âœï¸ XæŠ•ç¨¿æ–‡ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>
  <div class="subtitle">SNSæŠ•ç¨¿æ–‡ã‚’è‡ªå‹•ã§3ãƒ‘ã‚¿ãƒ¼ãƒ³ç”Ÿæˆã—ã¾ã™</div>
</header>

<div class="container">

  <div class="card">
    <h2>å•†å“æƒ…å ±</h2>

    <div class="form-group">
      <label for="product">å•†å“å <span style="color:#e53935">*</span></label>
      <input type="text" id="product" placeholder="ä¾‹ï¼šæ–‡æ—¦ã€ã‚¯ãƒ­ãƒ¯ãƒƒã‚µãƒ³ãŸã„ç„¼ãã€æ–°é®®é‡èœã‚»ãƒƒãƒˆ" maxlength="50">
    </div>

    <div class="form-group">
      <label for="features">ç‰¹å¾´ãƒ»ã‚¢ãƒ”ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒˆ <span style="font-weight:normal;color:var(--primary);font-size:11px">ï¼ˆç©ºæ¬„ã§ã‚‚è‡ªå‹•ã§è€ƒãˆã¾ã™ï¼‰</span></label>
      <textarea id="features" placeholder="ä¾‹ï¼šä»ŠãŒæ—¬ï¼ç”˜ã¿ãŒå¼·ãæœæ±ãŸã£ã·ã‚Šã€‚åœ°å…ƒè¾²å®¶ã•ã‚“ã‹ã‚‰å±Šã„ãŸã°ã‹ã‚Šã®æ–°é®®å“ã§ã™ã€‚&#10;â€»ç©ºæ¬„ã®ã¾ã¾ã§ã‚‚å•†å“åã‹ã‚‰è‡ªå‹•ç”Ÿæˆã—ã¾ã™"></textarea>
    </div>
  </div>

  <div class="card">
    <h2>çŠ¶æ³è¨­å®š</h2>

    <div class="form-group">
      <label for="season">å­£ç¯€ãƒ»å¤©æ°—</label>
      <div class="select-wrapper">
        <select id="season">
          <option value="">-- é¸æŠã—ã¦ãã ã•ã„ --</option>
          <optgroup label="æ˜¥">
            <option value="spring_sunny">æ˜¥ãƒ»æ™´ã‚Œ</option>
            <option value="spring_warm">æ˜¥ãƒ»æš–ã‹ã„æ—¥</option>
            <option value="spring_cherry">æ˜¥ãƒ»æ¡œã®å­£ç¯€</option>
          </optgroup>
          <optgroup label="å¤">
            <option value="summer_hot">å¤ãƒ»æš‘ã„æ—¥</option>
            <option value="summer_sunny">å¤ãƒ»æ™´å¤©</option>
            <option value="summer_beach">å¤ãƒ»æµ·æ°´æµ´ã‚·ãƒ¼ã‚ºãƒ³</option>
          </optgroup>
          <optgroup label="ç§‹">
            <option value="autumn_sunny">ç§‹ãƒ»æ™´ã‚Œ</option>
            <option value="autumn_harvest">ç§‹ãƒ»åç©«ã®å­£ç¯€</option>
            <option value="autumn_cool">ç§‹ãƒ»æ¶¼ã—ã„æ—¥</option>
          </optgroup>
          <optgroup label="å†¬">
            <option value="winter_cold">å†¬ãƒ»å¯’ã„æ—¥</option>
            <option value="winter_sunny">å†¬ãƒ»æ™´å¤©</option>
            <option value="winter_holiday">å†¬ãƒ»å¹´æœ«å¹´å§‹</option>
          </optgroup>
          <optgroup label="ãã®ä»–">
            <option value="rain">é›¨ã®æ—¥</option>
            <option value="weekend">é€±æœ«ãƒ»é€£ä¼‘</option>
            <option value="morning">æœä¸€ç•ª</option>
          </optgroup>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label>æŠ•ç¨¿ã®ãƒˆãƒ¼ãƒ³</label>
      <div class="tone-group">
        <div class="tone-option">
          <input type="radio" name="tone" id="tone-friendly" value="friendly" checked>
          <label for="tone-friendly">
            <span class="emoji">ğŸ˜Š</span>
            è¦ªã—ã¿ã‚„ã™ã„
          </label>
        </div>
        <div class="tone-option">
          <input type="radio" name="tone" id="tone-info" value="info">
          <label for="tone-info">
            <span class="emoji">ğŸ“¢</span>
            æƒ…å ±çš„
          </label>
        </div>
        <div class="tone-option">
          <input type="radio" name="tone" id="tone-exciting" value="exciting">
          <label for="tone-exciting">
            <span class="emoji">ğŸ‰</span>
            ãƒ¯ã‚¯ãƒ¯ã‚¯æ„Ÿ
          </label>
        </div>
      </div>
    </div>
  </div>

  <button class="generate-btn" onclick="generatePosts()">
    <span class="btn-icon">âœ¨</span>
    æŠ•ç¨¿æ–‡ã‚’ç”Ÿæˆã™ã‚‹
  </button>

  <div id="results">
    <div class="results-header">ğŸ’¬ ç”Ÿæˆã•ã‚ŒãŸæŠ•ç¨¿æ–‡æ¡ˆ</div>
    <div id="auto-notice" class="auto-notice" style="display:none">âœ¨ ç‰¹å¾´ãƒ»ã‚¢ãƒ”ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒˆã‚’å•†å“åã‹ã‚‰è‡ªå‹•ç”Ÿæˆã—ã¾ã—ãŸ</div>

    <div class="post-card">
      <div class="pattern-label">ãƒ‘ã‚¿ãƒ¼ãƒ³ 1</div>
      <div class="post-text" id="post1"></div>
      <div class="post-meta">
        <span class="char-count" id="count1"></span>
        <button class="copy-btn" onclick="copyPost(1)">ã‚³ãƒ”ãƒ¼</button>
      </div>
    </div>

    <div class="post-card">
      <div class="pattern-label">ãƒ‘ã‚¿ãƒ¼ãƒ³ 2</div>
      <div class="post-text" id="post2"></div>
      <div class="post-meta">
        <span class="char-count" id="count2"></span>
        <button class="copy-btn" onclick="copyPost(2)">ã‚³ãƒ”ãƒ¼</button>
      </div>
    </div>

    <div class="post-card">
      <div class="pattern-label">ãƒ‘ã‚¿ãƒ¼ãƒ³ 3</div>
      <div class="post-text" id="post3"></div>
      <div class="post-meta">
        <span class="char-count" id="count3"></span>
        <button class="copy-btn" onclick="copyPost(3)">ã‚³ãƒ”ãƒ¼</button>
      </div>
    </div>

    <div class="hashtag-section">
      <h3># ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°å€™è£œï¼ˆã‚¿ãƒƒãƒ—ã§ã‚³ãƒ”ãƒ¼ï¼‰</h3>
      <div class="hashtag-list" id="hashtags"></div>
    </div>

    <button class="regenerate-btn" onclick="generatePosts()">
      ğŸ”„ åˆ¥ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç”Ÿæˆ
    </button>
  </div>

</div>

<footer>é“ã®é§… è©ã•ã‚“ã•ã‚“ä¸‰è¦‹ SNSæŠ•ç¨¿æ”¯æ´ãƒ„ãƒ¼ãƒ«</footer>

<script>
// ============================================================
//  ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿
// ============================================================

const seasonPhrases = {
  spring_sunny:   ["æ˜¥ã®é™½æ°—ã«èª˜ã‚ã‚Œã¦", "ã½ã‹ã½ã‹é™½æ°—ã®ä»Šæ—¥", "æ˜¥ã‚‰ã—ã„ãŠå¤©æ°—ã®ä¸­"],
  spring_warm:    ["æš–ã‹ãªæ˜¥ã®æ—¥å·®ã—ã®ä¸­", "ç©ã‚„ã‹ãªæ˜¥ã®ä¸€æ—¥", "æ˜¥ã®æ¸©ã‚‚ã‚Šã‚’æ„Ÿã˜ãªãŒã‚‰"],
  spring_cherry:  ["æ¡œå’²ãã“ã®å­£ç¯€ã«", "ãŠèŠ±è¦‹å¸°ã‚Šã«ãœã²ï¼", "æ˜¥çˆ›æ¼«ã®ã“ã®é ƒ"],
  summer_hot:     ["æš‘ã„å¤ã«è² ã‘ãš", "çœŸå¤ã®ç†±ã„æ—¥å·®ã—ã®ä¸‹", "å¤ãƒãƒ†çŸ¥ã‚‰ãšã«éã”ã™ãŸã‚ã«"],
  summer_sunny:   ["å¤ã®é’ç©ºã®ä¸‹", "å¤ªé™½ã‚µãƒ³ã‚µãƒ³ï¼", "æ™´ã‚Œæ¸¡ã‚‹å¤ç©ºã«æ˜ ãˆã‚‹"],
  summer_beach:   ["æµ·æ°´æµ´ã‚·ãƒ¼ã‚ºãƒ³åˆ°æ¥ï¼", "å¤ã®è©ã«æ¥ãŸãªã‚‰", "æ½®é¢¨ã‚’æ„Ÿã˜ãªãŒã‚‰"],
  autumn_sunny:   ["ç§‹æ™´ã‚Œã®æ°—æŒã¡ã„ã„ä»Šæ—¥", "ã•ã‚ã‚„ã‹ãªç§‹ã®æ—¥ã«", "æ¾„ã‚“ã ç§‹ç©ºã®ä¸‹"],
  autumn_harvest: ["å®Ÿã‚Šã®ç§‹ã«æ„Ÿè¬ï¼", "è±Šã‹ãªåç©«ã®å­£ç¯€", "ç§‹ã®æµã¿ã‚’ãŠå±Šã‘"],
  autumn_cool:    ["æ¶¼ã—ããªã£ã¦ããŸä»Šæ—¥ã“ã®é ƒ", "ç§‹é¢¨ãã‚ˆãå­£ç¯€ã«", "ã²ã‚“ã‚„ã‚Šæ°—æŒã¡ã„ã„ç§‹ã®æ—¥"],
  winter_cold:    ["å¯’ã„æ—¥ã“ãæ¥ã¦ã»ã—ã„ï¼", "å†¬ã®å†·ãŸã„ç©ºæ°—ã®ä¸­ã§", "ã½ã‹ã½ã‹æ¸©ã¾ã‚‹å†¬ã®ä¸€æ—¥"],
  winter_sunny:   ["å†¬æ™´ã‚Œã®æ¾„ã‚“ã ç©ºã®ä¸‹", "å†¬ã®æ¾„ã‚“ã é’ç©ºã«æ˜ ãˆã¦", "å†¬ã®ã‚­ãƒªãƒƒã¨ã—ãŸç©ºæ°—ã®ä¸­"],
  winter_holiday: ["å¹´æœ«å¹´å§‹ã®ç‰¹åˆ¥ãªæ™‚æœŸã«", "ãŠæ­£æœˆæ°—åˆ†ã§", "æ–°å¹´æœ€åˆã®ãŠè²·ã„ç‰©ã«"],
  rain:           ["é›¨ã®æ—¥ã‚‚ãŠåº—ã®ä¸­ã¯ã«ãã‚„ã‹ï¼", "é›¨ã ã‹ã‚‰ã“ãã‚†ã£ãã‚Šè¦‹ã‚‰ã‚Œã‚‹", "é›¨ã§ã‚‚ãƒ‰ãƒ©ã‚¤ãƒ–ãŒã¦ã‚‰"],
  weekend:        ["é€±æœ«ã®ãŠå‡ºã‹ã‘ã«", "é€£ä¼‘ã®ãŠç«‹ã¡å¯„ã‚Šã«", "é€±æœ«ãƒ‰ãƒ©ã‚¤ãƒ–ã®ã¤ã„ã§ã«"],
  morning:        ["æœä¸€ç•ªã«å…¥è·ï¼", "ä»Šæœå±Šã„ãŸã°ã‹ã‚Šã®", "æ—©èµ·ãã¯ä¸‰æ–‡ã®å¾³ï¼"],
  "":             ["é“ã®é§…ã¨ã„ãˆã°", "ä»Šæ—¥ã‚‚ãŠå¾…ã¡ã—ã¦ã„ã¾ã™ï¼", "ã”æ¥åº—ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™"]
};

// ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã¯ã€ãƒ©ãƒƒãƒ—æ¸ˆã¿ã®ç‰¹å¾´ãƒ•ãƒ¬ãƒ¼ã‚ºãŒãã®ã¾ã¾æ¸¡ã•ã‚Œã‚‹
const toneTemplates = {
  friendly: [
    (p, f, s) => `${s}ã€${p}ãŒå…¥è·ã—ã¦ã„ã¾ã™ğŸµ\n${f ? f + '\n' : ''}ãœã²é“ã®é§… è©ã•ã‚“ã•ã‚“ä¸‰è¦‹ã¸éŠã³ã«ãã¦ãã ã•ã„ã­ğŸ˜Š`,
    (p, f, s) => `ã“ã‚“ã«ã¡ã¯ï¼${s}ã€ä»Šæ—¥ã‚‚${p}ãŒä¸¦ã‚“ã§ã„ã¾ã™ã‚ˆğŸ›’\n${f ? f + '\n' : ''}çš†ã•ã‚“ã®ã”æ¥åº—ãŠå¾…ã¡ã—ã¦ã„ã¾ã™â™ª`,
    (p, f, s) => `${s}${p}ã‚’ã”ç´¹ä»‹ã—ã¾ã™âœ¨\n${f ? f + '\n' : ''}é“ã®é§… è©ã•ã‚“ã•ã‚“ä¸‰è¦‹ã§ãŠè²·ã„æ±‚ã‚ãã ã•ã„ğŸ™Œ`,
    (p, f, s) => `${s}ã€${p}ãŒå¤§å¥½è©•ã§ã™ï¼\n${f ? f + '\n' : ''}ãŠè¿‘ãã«ãŠè¶Šã—ã®éš›ã¯ãœã²ç«‹ã¡å¯„ã£ã¦ã¿ã¦ãã ã•ã„ğŸ˜„`,
    (p, f, s) => `${s}ã€è©ã•ã‚“ã•ã‚“ä¸‰è¦‹ã«${p}ãŒç™»å ´ï¼\n${f ? f + '\n' : ''}ãŠæ°—è»½ã«ã®ãã„ã¦ã¿ã¦ãã ã•ã„ã­ğŸŒ¿`
  ],
  info: [
    (p, f, s) => `ã€å…¥è·æƒ…å ±ã€‘${s}ã€${p}ãŒä¸¦ã‚“ã§ã„ã¾ã™ã€‚\n${f ? f + '\n' : ''}é“ã®é§… è©ã•ã‚“ã•ã‚“ä¸‰è¦‹ã«ã¦ãŠè²·ã„æ±‚ã‚ã„ãŸã ã‘ã¾ã™ã€‚`,
    (p, f, s) => `ğŸ“é“ã®é§… è©ã•ã‚“ã•ã‚“ä¸‰è¦‹\n${s}ã€${p}ãŒå…¥è·ã—ã¾ã—ãŸã€‚\n${f || 'ãœã²ãŠç«‹ã¡å¯„ã‚Šãã ã•ã„ã€‚'}`,
    (p, f, s) => `ã€ä»Šæ—¥ã®ãŠã™ã™ã‚ã€‘${p}\n${f ? f + '\n' : ''}${s}ã€è©ã•ã‚“ã•ã‚“ä¸‰è¦‹ã§ãŠå¾…ã¡ã—ã¦ãŠã‚Šã¾ã™ã€‚`,
    (p, f, s) => `${s}ã®${p}ã€è²©å£²ä¸­ã§ã™ã€‚\n${f ? f + '\n' : ''}é–‹é¤¨æ™‚é–“å†…ã«ãœã²ãŠè¶Šã—ãã ã•ã„ğŸ“Œ`,
    (p, f, s) => `ç”£åœ°ç›´é€ï¼${p}\n${f ? f + '\n' : ''}${s}ã€é“ã®é§… è©ã•ã‚“ã•ã‚“ä¸‰è¦‹ã¸ã©ã†ãã€‚`
  ],
  exciting: [
    (p, f, s) => `ğŸ‰å¾…ã£ã¦ã¾ã—ãŸï¼${s}${p}ãŒç™»å ´ï¼\n${f ? f + '\n' : ''}ä»Šã™ãè©ã•ã‚“ã•ã‚“ä¸‰è¦‹ã¸GOğŸš—ğŸ’¨`,
    (p, f, s) => `âœ¨è¦‹ã¦è¦‹ã¦ï¼${p}ãŒå…¥è·ã—ã¾ã—ãŸã‚ˆã€œï¼\n${f ? f + '\n' : ''}${s}ã€çµ¶å¯¾è¦‹é€ƒã›ãªã„ï¼æ€¥ã„ã§ï¼ğŸ˜†`,
    (p, f, s) => `ğŸ”¥å¤§æ³¨ç›®ï¼${s}ã®${p}ã€æœ€é«˜ã§ã™ï¼\n${f ? f + '\n' : ''}è©ã•ã‚“ã•ã‚“ä¸‰è¦‹ã§çµ¶è³›è²©å£²ä¸­ğŸ›’`,
    (p, f, s) => `ã‚ã€œï¼${p}ãŒå‡ºãã‚ã„ã¾ã—ãŸâœ¨\n${f ? f + '\n' : ''}${s}ã®ã“ã®æ„Ÿå‹•ã€ãœã²ä½“é¨“ã—ã«æ¥ã¦ï¼ğŸ™Œ`,
    (p, f, s) => `ğŸŒŸä»ŠãŒçµ¶å¯¾æ—¬ï¼${p}ï¼\n${f ? f + '\n' : ''}${s}ã€è©ã•ã‚“ã•ã‚“ä¸‰è¦‹ã§é‹å‘½ã®ä¸€å“ã«å‡ºä¼šã£ã¦ï¼`
  ]
};

const baseHashtags = [
  "#é“ã®é§…", "#è©ã•ã‚“ã•ã‚“ä¸‰è¦‹", "#è©å¸‚", "#å±±å£çœŒ", "#é“ã®é§…ã‚°ãƒ«ãƒ¡",
  "#ç”£åœ°ç›´é€", "#åœ°å…ƒã®å‘³", "#ãƒ‰ãƒ©ã‚¤ãƒ–", "#é€±æœ«ãŠå‡ºã‹ã‘", "#é“ã®é§…ã‚ãã‚Š"
];

const productHashtagMap = {
  "æ–‡æ—¦": ["#æ–‡æ—¦", "#æŸ‘æ©˜", "#ã¿ã‹ã‚“"],
  "ãŸã„ç„¼ã": ["#ãŸã„ç„¼ã", "#ã‚¯ãƒ­ãƒ¯ãƒƒã‚µãƒ³ãŸã„ç„¼ã", "#ã‚¹ã‚¤ãƒ¼ãƒ„"],
  "ã‚¯ãƒ­ãƒ¯ãƒƒã‚µãƒ³": ["#ã‚¯ãƒ­ãƒ¯ãƒƒã‚µãƒ³", "#ãƒ‘ãƒ³", "#ã‚¹ã‚¤ãƒ¼ãƒ„"],
  "é‡èœ": ["#æ–°é®®é‡èœ", "#åœ°å…ƒé‡èœ", "#æœ‰æ©Ÿé‡èœ"],
  "é­š": ["#æµ·ç”£ç‰©", "#é®®é­š", "#è©ã®é­š"],
  "ã‚¤ã‚«": ["#ã‚¤ã‚«", "#è©ã®ã‚¤ã‚«", "#æµ·ç”£ç‰©"],
  "ã¿ã‹ã‚“": ["#ã¿ã‹ã‚“", "#æŸ‘æ©˜", "#ãƒ•ãƒ«ãƒ¼ãƒ„"],
  "ã„ã¡ã”": ["#ã„ã¡ã”", "#è‹º", "#ãƒ•ãƒ«ãƒ¼ãƒ„"],
  "ã‹ã¼ã¡ã‚ƒ": ["#ã‹ã¼ã¡ã‚ƒ", "#ç§‹é‡èœ", "#åœ°å…ƒé‡èœ"],
  "ãŠç±³": ["#ãŠç±³", "#æ–°ç±³", "#åœ°å…ƒç±³"],
  "å¼å½“": ["#ãŠå¼å½“", "#ãƒ©ãƒ³ãƒ", "#æ‰‹ä½œã‚Š"],
  "ãŠå¼å½“": ["#ãŠå¼å½“", "#ãƒ©ãƒ³ãƒ", "#æ‰‹ä½œã‚Š"],
  "ã‚¹ã‚¤ãƒ¼ãƒ„": ["#ã‚¹ã‚¤ãƒ¼ãƒ„", "#å’Œè“å­", "#æ‰‹ä½œã‚Šã‚¹ã‚¤ãƒ¼ãƒ„"],
  "ã‚¸ãƒ£ãƒ ": ["#ã‚¸ãƒ£ãƒ ", "#æ‰‹ä½œã‚Šã‚¸ãƒ£ãƒ ", "#ãƒ•ãƒ«ãƒ¼ãƒ„"],
  "æ¢…": ["#æ¢…", "#æ¢…å¹²ã—", "#å±±å£ã®æµã¿"],
  "ã‚¢ã‚¹ãƒ‘ãƒ©": ["#ã‚¢ã‚¹ãƒ‘ãƒ©ã‚¬ã‚¹", "#æ˜¥é‡èœ", "#æ–°é®®é‡èœ"],
};

const seasonHashtags = {
  spring_sunny: ["#æ˜¥", "#æ˜¥ã®ãŠå‡ºã‹ã‘"],
  spring_warm:  ["#æ˜¥", "#æ˜¥ã®å‘³è¦š"],
  spring_cherry:["#èŠ±è¦‹", "#æ˜¥", "#æ¡œ"],
  summer_hot:   ["#å¤", "#å¤ã‚°ãƒ«ãƒ¡"],
  summer_sunny: ["#å¤", "#å¤ã®æ€ã„å‡º"],
  summer_beach: ["#å¤æ—…", "#è©è¦³å…‰"],
  autumn_sunny: ["#ç§‹", "#ç§‹æ™´ã‚Œ"],
  autumn_harvest:["#ç§‹ã®å‘³è¦š", "#åç©«ç¥­"],
  autumn_cool:  ["#ç§‹", "#ç§‹ã®ãƒ‰ãƒ©ã‚¤ãƒ–"],
  winter_cold:  ["#å†¬", "#å†¬ã®å‘³è¦š"],
  winter_sunny: ["#å†¬æ™´ã‚Œ", "#å†¬"],
  winter_holiday:["#å¹´æœ«å¹´å§‹", "#ãŠæ­£æœˆ"],
  rain:         ["#é›¨ã®æ—¥"],
  weekend:      ["#é€±æœ«", "#ãŠå‡ºã‹ã‘"],
  morning:      ["#æœå¸‚", "#æœä¸€ç•ª"],
  "":           []
};

// ============================================================
//  è‡ªå‹•ç‰¹å¾´ç”Ÿæˆãƒ‡ãƒ¼ã‚¿
// ============================================================

const autoFeatureMap = {
  "æ–‡æ—¦":     ["ç”˜ã¿ãŸã£ã·ã‚Šã§æœæ±è±Šå¯Œã€ä»ŠãŒæ—¬", "ã•ã‚ã‚„ã‹ãªé¦™ã‚Šã¨æ¿ƒåšãªç”˜ã•ãŒé­…åŠ›", "è‚‰åšã‚¸ãƒ¥ãƒ¼ã‚·ãƒ¼ã€ãƒ“ã‚¿ãƒŸãƒ³CãŸã£ã·ã‚Š", "çš®ã”ã¨æ¥½ã—ã‚ã‚‹åœ°å…ƒç”£ã®é€¸å“"],
  "ãŸã„ç„¼ã": ["å¤–ã¯ã‚µã‚¯ã‚µã‚¯ã€ä¸­ã¯ã‚ã‚“ã“ãŸã£ã·ã‚Š", "ã‚¯ãƒ­ãƒ¯ãƒƒã‚µãƒ³ç”Ÿåœ°ã§ã‚µã‚¯ãµã‚é£Ÿæ„Ÿ", "ç†±ã€…ã§ããŸã¦ã€ç”˜ã•æ§ãˆã‚ã§çµ¶å“", "åœ°å…ƒã§å¤§äººæ°—ã®ãƒ­ãƒ³ã‚°ã‚»ãƒ©ãƒ¼å•†å“"],
  "ã‚¯ãƒ­ãƒ¯ãƒƒã‚µãƒ³": ["ãƒã‚¿ãƒ¼ã®é¦™ã‚Šè±Šã‹ãªã‚µã‚¯ã‚µã‚¯é£Ÿæ„Ÿ", "å¤–ã¯ãƒ‘ãƒªãƒƒã¨ã€ä¸­ã¯ã‚‚ã£ã¡ã‚Š", "åœ°å…ƒç”£å°éº¦ã‚’ä½¿ã£ãŸã“ã ã‚ã‚Šã®ä¸€å“"],
  "é‡èœ":     ["æœæ¡ã‚Œæ–°é®®ã€åœ°å…ƒè¾²å®¶ã•ã‚“ã‹ã‚‰ç›´é€", "æ¡ã‚ŒãŸã¦ã®é®®åº¦ã¨æ—¨ã¿ãŒè‡ªæ…¢", "å½©ã‚Šè±Šã‹ã§æ „é¤ŠãŸã£ã·ã‚Š"],
  "é­š":       ["è©æ¸¯æ°´æšã’ã®æ–°é®®ãªåœ°é­š", "æœç²ã‚Œé®®é­šã€æ—¨ã¿ãŒå‡ç¸®", "æ—¥æœ¬æµ·ã®æµã¿ã‚’ãã®ã¾ã¾é£Ÿå“ã¸"],
  "ã‚¤ã‚«":     ["è©åç‰©ã€é€æ˜æ„ŸæŠœç¾¤ã®æ–°é®®ã‚¤ã‚«", "åˆºèº«ã«ã—ã¦ã‚‚ç„¼ã„ã¦ã‚‚çµ¶å“", "æ—¥æœ¬æµ·ç”£ã®è‚‰åšã§ç”˜ã¿ã‚ã‚‹ã‚¤ã‚«"],
  "ã¿ã‹ã‚“":   ["ç”˜ãã¦ã‚¸ãƒ¥ãƒ¼ã‚·ãƒ¼ã€çš®è–„ã§é£Ÿã¹ã‚„ã™ã„", "åœ°å…ƒè¾²å®¶ã•ã‚“è‡ªæ…¢ã®æ¿ƒåšãªç”˜ã•", "æ—¬ã®æŸ‘æ©˜ã€ãƒ“ã‚¿ãƒŸãƒ³CãŸã£ã·ã‚Š"],
  "ã„ã¡ã”":   ["å®Œç†Ÿã§ç”˜ã•æŠœç¾¤ã€é¦™ã‚Šã‚‚æœ€é«˜", "çœŸã£èµ¤ãªå®Œç†Ÿã„ã¡ã”ãŒç™»å ´", "ç”˜é…¸ã£ã±ãã¦ã‚¸ãƒ¥ãƒ¼ã‚·ãƒ¼ãªæ—¬ã®å‘³"],
  "ã‹ã¼ã¡ã‚ƒ": ["ã»ãã»ãç”˜ãã¦æ „é¤Šæº€ç‚¹", "åœ°å…ƒç”£ã®è‚‰åšã§ãƒ›ã‚¯ãƒ›ã‚¯ã‹ã¼ã¡ã‚ƒ", "ã‚¹ãƒ¼ãƒ—ã‚„ã‚³ãƒ­ãƒƒã‚±ã«ã‚‚æœ€é«˜"],
  "ãŠç±³":     ["åœ°å…ƒã§è‚²ã¦ãŸæ–°ç±³ã€ã‚‚ã¡ã‚‚ã¡é£Ÿæ„Ÿ", "è¾²å®¶ç›´é€ã®æ–°é®®ãªãŠç±³", "ç‚Šãç«‹ã¦ã®ãµã£ãã‚‰æ„ŸãŒæ ¼åˆ¥"],
  "å¼å½“":     ["åœ°å…ƒé£Ÿæã‚’ä½¿ã£ãŸæ‰‹ä½œã‚ŠãŠå¼å½“", "æ¯æ—¥ä»•è¾¼ã‚€æ‰‹ä½œã‚Šå¼å½“ãŒä¸¦ã‚“ã§ã„ã¾ã™", "ãƒœãƒªãƒ¥ãƒ¼ãƒ æº€ç‚¹ã€åœ°å…ƒã®å‘³ã‚’ã©ã†ã"],
  "ãŠå¼å½“":   ["åœ°å…ƒé£Ÿæã‚’ä½¿ã£ãŸæ‰‹ä½œã‚ŠãŠå¼å½“", "æ¯æ—¥ä»•è¾¼ã‚€æ‰‹ä½œã‚Šå¼å½“ãŒä¸¦ã‚“ã§ã„ã¾ã™", "ãƒœãƒªãƒ¥ãƒ¼ãƒ æº€ç‚¹ã€åœ°å…ƒã®å‘³ã‚’ã©ã†ã"],
  "æ¢…":       ["ã™ã£ã±ãã¦é¢¨å‘³è±Šã‹ã€ã”é£¯ãŒé€²ã‚€", "æ‰‹ä½œã‚Šã®æ¢…å¹²ã—ã€æ˜”ãªãŒã‚‰ã®å‘³", "åœ°å…ƒç”£ã®æ¢…ã‚’ä½¿ã£ãŸè‡ªæ…¢ã®é€¸å“"],
  "ã‚¢ã‚¹ãƒ‘ãƒ©": ["è‚‰åšã§ã‚·ãƒ£ã‚­ã‚·ãƒ£ã‚­ã€ç”˜ã¿ãŒå¼·ã„", "æœæ¡ã‚Œã‚¢ã‚¹ãƒ‘ãƒ©ã€é®®åº¦ãŒé•ã„ã¾ã™", "å¤ªãã¦æŸ”ã‚‰ã‹ã€æ—¬ã®ã‚¢ã‚¹ãƒ‘ãƒ©"],
  "ã‚¹ã‚¤ãƒ¼ãƒ„": ["åœ°å…ƒç´ æã‚’æ´»ã‹ã—ãŸæ‰‹ä½œã‚Šã‚¹ã‚¤ãƒ¼ãƒ„", "ç´ æœ´ã§ã‚„ã•ã—ã„ç”˜ã•ãŒäººæ°—", "ãŠåœŸç”£ã«ã‚‚å–œã°ã‚Œã‚‹é€¸å“"],
  "ã‚¸ãƒ£ãƒ ":   ["åœ°å…ƒç”£ãƒ•ãƒ«ãƒ¼ãƒ„ã‚’ãŸã£ã·ã‚Šä½¿ç”¨", "æ·»åŠ ç‰©ä¸ä½¿ç”¨ã®æ‰‹ä½œã‚Šã‚¸ãƒ£ãƒ ", "æœè‚‰ã”ã‚ã”ã‚ã€æ¿ƒåšãªå‘³ã‚ã„"],
  "ãƒˆãƒãƒˆ":   ["å®Œç†Ÿã§ç”˜ã¿ãŸã£ã·ã‚Šã€æ—¨ã¿ãŒå‡ç¸®", "åœ°å…ƒè¾²å®¶ã®æœæ¡ã‚Œå®Œç†Ÿãƒˆãƒãƒˆ", "ãã®ã¾ã¾é£Ÿã¹ã¦ã‚‚çµ¶å“ã®ç”˜ã•"],
  "ã˜ã‚ƒãŒã„ã‚‚": ["ã»ãã»ãé£Ÿæ„Ÿã€åœ°å…ƒè¾²å®¶ã•ã‚“ç›´é€", "ã‚³ãƒ­ãƒƒã‚±ãƒ»ã‚·ãƒãƒ¥ãƒ¼ã«æœ€é«˜ã®æ—¨ã•", "åœ°å…ƒç”£ã®æ–°é®®ã˜ã‚ƒãŒã„ã‚‚"]
};

const autoFeatureFallback = [
  "åœ°å…ƒç”£ã®ã“ã ã‚ã‚Šé€¸å“",
  "è©ã®æµã¿ã‚’ãŸã£ã·ã‚Šè©°ã‚è¾¼ã‚“ã§ã„ã¾ã™",
  "åœ°å…ƒè¾²å®¶ã•ã‚“ã‹ã‚‰ç›´é€ã®æ–°é®®å“",
  "é“ã®é§…ã‚¹ã‚¿ãƒƒãƒ•ã®ã‚¤ãƒæ¨ã—å•†å“",
  "ä»Šã ã‘ã®å­£ç¯€é™å®šå“ã‚’ãŠè¦‹é€ƒã—ãªã",
  "è©ã®è‡ªç„¶ãŒè‚²ã¦ãŸè‡ªæ…¢ã®ä¸€å“"
];

// ç‰¹å¾´ã®è¡¨ç¾ãƒ©ãƒƒãƒ‘ãƒ¼ï¼ˆãƒˆãƒ¼ãƒ³åˆ¥ãƒ»ãƒ‘ã‚¿ãƒ¼ãƒ³ã”ã¨ã«å¤‰åŒ–ï¼‰
const featureWrappers = {
  friendly: [
    f => f,
    f => `å®Ÿã¯${f}âœ¨`,
    f => `${f}ãªã‚“ã§ã™ã‚ˆã€œï¼`,
    f => `çŸ¥ã£ã¦ãŸï¼Ÿ${f}`,
    f => `${f}ã€ãœã²ä¸€åº¦è©¦ã—ã¦â™ª`
  ],
  info: [
    f => f,
    f => `ã€ç‰¹å¾´ã€‘${f}`,
    f => `ãƒã‚¤ãƒ³ãƒˆã¯${f}`,
    f => `${f}ï¼ˆç”£åœ°ç›´é€ï¼‰`,
    f => `ç‰¹å¾´ï¼š${f}`
  ],
  exciting: [
    f => `${f}ã€ã‚‚ã†æœ€é«˜ï¼`,
    f => `ã—ã‹ã‚‚${f}ï¼`,
    f => `ãªã‚“ã¨${f}ğŸ”¥`,
    f => `${f}â€¦ã‚‚ã†è²·ã†ã—ã‹ãªã„ï¼`,
    f => `${f}ã£ã¦çŸ¥ã£ã¦ãŸï¼Ÿ`
  ]
};

// ============================================================
//  ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
// ============================================================

function trimFeature(text, maxLen) {
  text = text.trim();
  if (text.length <= maxLen) return text;
  return text.slice(0, maxLen - 1) + 'â€¦';
}

function getAutoFeature(product) {
  for (const [key, phrases] of Object.entries(autoFeatureMap)) {
    if (product.includes(key)) return rand(phrases);
  }
  return rand(autoFeatureFallback);
}

function rand(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

function countChars(text) {
  // Xã®æ–‡å­—ã‚«ã‚¦ãƒ³ãƒˆ: ASCII=0.5æ–‡å­—ã€ãã®ä»–=1æ–‡å­— ã¨ã—ã¦æ¦‚ç®—
  let count = 0;
  for (const ch of text) {
    count += (ch.charCodeAt(0) < 256) ? 0.5 : 1;
  }
  return Math.ceil(count);
}

function truncateToLimit(text, limit = 140) {
  let count = 0;
  let i = 0;
  for (i = 0; i < text.length; i++) {
    const add = (text.charCodeAt(i) < 256) ? 0.5 : 1;
    if (count + add > limit) break;
    count += add;
  }
  if (i < text.length) {
    return text.slice(0, i - 1) + 'â€¦';
  }
  return text;
}

function setCharCount(el, text) {
  const count = countChars(text);
  el.textContent = `${count} / 140æ–‡å­—`;
  el.className = 'char-count';
  if (count > 140) el.classList.add('over');
  else if (count > 120) el.classList.add('warn');
}

// ============================================================
//  ãƒ¡ã‚¤ãƒ³ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
// ============================================================

function generatePosts() {
  const product = document.getElementById('product').value.trim();
  if (!product) {
    alert('å•†å“åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
    document.getElementById('product').focus();
    return;
  }

  const userFeature   = document.getElementById('features').value.trim();
  const isAutoFeature = !userFeature;
  const season        = document.getElementById('season').value;
  const tone          = document.querySelector('input[name="tone"]:checked').value;

  const seasonArr = seasonPhrases[season] || seasonPhrases[""];
  const templates = toneTemplates[tone];
  const wrappers  = featureWrappers[tone];

  // ä½¿ç”¨æ¸ˆã¿ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ç®¡ç†ã—ã¦é‡è¤‡ã‚’é¿ã‘ã‚‹
  const usedSeasonIdx  = new Set();
  const usedTmplIdx    = new Set();
  const usedWrapperIdx = new Set();

  const posts = [];
  for (let i = 0; i < 3; i++) {
    let sIdx;
    do { sIdx = Math.floor(Math.random() * seasonArr.length); }
    while (usedSeasonIdx.has(sIdx) && usedSeasonIdx.size < seasonArr.length);
    usedSeasonIdx.add(sIdx);

    let tIdx;
    do { tIdx = Math.floor(Math.random() * templates.length); }
    while (usedTmplIdx.has(tIdx) && usedTmplIdx.size < templates.length);
    usedTmplIdx.add(tIdx);

    // ç©ºæ¬„ãªã‚‰è‡ªå‹•ç”Ÿæˆï¼ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã”ã¨ã«æ¯å›å¼•ãç›´ã™ï¼‰
    const rawFeature     = userFeature || getAutoFeature(product);
    const trimmedFeature = trimFeature(rawFeature, 32);

    // è¡¨ç¾ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’é¸æŠï¼ˆé‡è¤‡å›é¿ï¼‰
    let wIdx;
    do { wIdx = Math.floor(Math.random() * wrappers.length); }
    while (usedWrapperIdx.has(wIdx) && usedWrapperIdx.size < wrappers.length);
    usedWrapperIdx.add(wIdx);

    const wrappedFeature = wrappers[wIdx](trimmedFeature);
    const seasonPhrase   = seasonArr[sIdx];
    const raw = templates[tIdx](product, wrappedFeature, seasonPhrase);
    posts.push(truncateToLimit(raw, 140));
  }

  // è‡ªå‹•ç”Ÿæˆãƒãƒ¼ãƒ†ã‚£ã‚¹ã®è¡¨ç¤ºåˆ¶å¾¡
  document.getElementById('auto-notice').style.display = isAutoFeature ? 'block' : 'none';

  // æŠ•ç¨¿æ–‡ã®è¡¨ç¤º
  for (let i = 1; i <= 3; i++) {
    const el = document.getElementById(`post${i}`);
    el.textContent = posts[i - 1];
    setCharCount(document.getElementById(`count${i}`), posts[i - 1]);

    const btn = el.parentElement.querySelector('.copy-btn');
    btn.textContent = 'ã‚³ãƒ”ãƒ¼';
    btn.classList.remove('copied');
  }

  // ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ç”Ÿæˆ
  const tags = new Set();
  tags.add("#é“ã®é§…");
  tags.add("#è©ã•ã‚“ã•ã‚“ä¸‰è¦‹");

  // å•†å“åãƒãƒƒãƒãƒ³ã‚°
  for (const [key, values] of Object.entries(productHashtagMap)) {
    if (product.includes(key)) {
      values.forEach(t => tags.add(t));
      break;
    }
  }

  // å­£ç¯€ã‚¿ã‚°
  (seasonHashtags[season] || []).forEach(t => tags.add(t));

  // åŸºæœ¬ã‚¿ã‚°ã‹ã‚‰è£œå……ï¼ˆæœ€å¤§10å€‹ï¼‰
  for (const t of baseHashtags) {
    if (tags.size >= 10) break;
    tags.add(t);
  }

  const hashtagEl = document.getElementById('hashtags');
  hashtagEl.innerHTML = '';
  tags.forEach(tag => {
    const span = document.createElement('span');
    span.className = 'hashtag-tag';
    span.textContent = tag;
    span.title = 'ã‚¿ãƒƒãƒ—ã§ã‚³ãƒ”ãƒ¼';
    span.addEventListener('click', () => {
      navigator.clipboard.writeText(tag).then(() => {
        const orig = span.style.background;
        span.style.background = '#2d7d46';
        span.style.color = '#fff';
        span.style.borderColor = '#2d7d46';
        setTimeout(() => {
          span.style.background = '';
          span.style.color = '';
          span.style.borderColor = '';
        }, 1200);
      });
    });
    hashtagEl.appendChild(span);
  });

  // çµæœã‚¨ãƒªã‚¢è¡¨ç¤º
  const resultsEl = document.getElementById('results');
  resultsEl.style.display = 'block';
  resultsEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

// ============================================================
//  ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½
// ============================================================

function copyPost(n) {
  const text = document.getElementById(`post${n}`).textContent;
  const btn  = document.querySelector(`#post${n}`).parentElement.parentElement.querySelector('.copy-btn');

  const markCopied = () => {
    btn.textContent = 'ã‚³ãƒ”ãƒ¼æ¸ˆã¿âœ“';
    btn.classList.add('copied');
    setTimeout(() => {
      btn.textContent = 'ã‚³ãƒ”ãƒ¼';
      btn.classList.remove('copied');
    }, 2000);
  };

  navigator.clipboard.writeText(text).then(markCopied).catch(() => {
    const ta = document.createElement('textarea');
    ta.value = text;
    ta.style.position = 'fixed';
    ta.style.opacity = '0';
    document.body.appendChild(ta);
    ta.select();
    document.execCommand('copy');
    document.body.removeChild(ta);
    markCopied();
  });
}

// Enterã‚­ãƒ¼ã§ç”Ÿæˆ
document.getElementById('product').addEventListener('keydown', (e) => {
  if (e.key === 'Enter') generatePosts();
});
</script>
</body>
</html>
